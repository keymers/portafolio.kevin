---
import Layout from '../layouts/Layout.astro';

// Welcome to Astro! Wondering what to do next? Check out the Astro documentation at https://docs.astro.build
// Don't want to use any of this? Delete everything in this file, the `assets`, `components`, and `layouts` directories, and start fresh.
---

<Layout title="KGL - Portafolio">
	<main class="min-h-screen flex items-center justify-center bg-primary relative overflow-hidden page-transition">
		{/* Efecto de part√≠culas de fondo */}
		<div class="absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-primary via-primary/80 to-primary/60"></div>
		<!-- <div class="absolute inset-0 bg-[url('/grid.svg')] opacity-20"></div> -->
		
		{/* Efecto de glitch en el fondo */}
		<div class="absolute inset-0 glitch-bg"></div>
		
		{/* Red neuronal animada eliminada */}

		<div class="relative w-full max-w-4xl h-[90vh] flex items-center justify-center">
			{/* Tarjeta principal con navbar */}
			<div class="relative w-full h-full bg-secondary/80 backdrop-blur-sm rounded-3xl border-4 border-accent neon-glow shadow-2xl flex flex-col overflow-hidden group hover:shadow-[0_0_30px_rgba(225,29,116,0.5)] transition-all duration-500 cyberpunk-card">
				{/* Efecto de escaneo */}
				<div class="absolute inset-0 scan-line"></div>
				
				{/* Navbar centrado */}
				<nav class="relative flex items-center justify-center px-8 py-4 border-b border-accent/40 bg-secondary/80 backdrop-blur-sm">
					{/* Logo a la izquierda, enlaces centrados */}
					<span class="absolute left-8 text-2xl font-extrabold text-accent tracking-widest drop-shadow-neon animate-pulse glitch-text" style="position: absolute; left: 2rem;">KGL</span>
					<ul class="flex gap-8 text-lg font-medium">
						<li><a href="/" class="hover:text-accent transition-all duration-300 hover:scale-110 hover:drop-shadow-neon cyberpunk-link">Home</a></li>
						<li><a href="/proyectos" class="hover:text-accent transition-all duration-300 hover:scale-110 hover:drop-shadow-neon cyberpunk-link page-link">Proyectos</a></li>
						<li><a href="/sobremi" class="hover:text-accent transition-all duration-300 hover:scale-110 hover:drop-shadow-neon cyberpunk-link">Sobre m√≠</a></li>
					</ul>
				</nav>

				{/* Contenido principal */}
				<div class="flex-1 overflow-y-auto">
					{/* Secci√≥n Home */}
					<section id="home" class="h-full flex flex-col items-center justify-start relative pt-8 md:pt-0 md:justify-center">
						{/* Logo central */}
						<div class="z-20 bg-secondary/90 backdrop-blur-sm rounded-2xl shadow-lg p-6 md:p-10 flex flex-col items-center border-4 border-accent neon-glow animate-glow group-hover:scale-105 transition-all duration-500 mb-8 md:mb-0 md:absolute md:left-1/2 md:top-1/2 md:-translate-x-1/2 md:-translate-y-1/2">
							<span class="text-3xl md:text-5xl font-extrabold tracking-widest text-accent drop-shadow-neon animate-pulse">KGL</span>
							<span class="mt-2 text-base md:text-lg text-white/80 font-mono">PORTAFOLIO</span>
						</div>

						{/* Contenedor de cuadros */}
						<div class="flex flex-col gap-4 w-full px-4 md:hidden">
							{/* Cuadros apilados en m√≥vil */}
							<div class="w-full h-24 bg-secondary/80 backdrop-blur-sm rounded-xl border-2 border-accent neon-glow flex items-center justify-between px-4 hover:scale-105 transition-all duration-500 group-hover:shadow-[0_0_20px_rgba(225,29,116,0.3)]">
								<div class="flex items-center gap-4">
									<svg class="w-12 h-12 neon-icon animate-pulse" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
										<rect x="6" y="14" width="36" height="24" rx="4" fill="#181B2B" stroke="#3B82F6" stroke-width="2.5"/>
										<path d="M6 18V14a4 4 0 0 1 4-4h8l4 6h20a4 4 0 0 1 4 4v4" stroke="#e11d74" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
										<circle cx="14" cy="34" r="2" fill="#e11d74"/>
										<circle cx="24" cy="34" r="2" fill="#3B82F6"/>
										<circle cx="34" cy="34" r="2" fill="#e11d74"/>
										<rect x="12" y="22" width="24" height="4" rx="2" fill="#3B82F6" opacity="0.5"/>
									</svg>
									<div class="flex flex-col">
										<span class="text-lg font-bold text-accent font-mono">Ver Proyectos</span>
										<a href="/proyectos" class="text-sm text-white/80 hover:text-accent transition-all duration-300">Explorar ‚Üí</a>
									</div>
								</div>
							</div>

							<div class="w-full h-24 bg-secondary/80 backdrop-blur-sm rounded-xl border-2 border-accent neon-glow flex items-center justify-between px-4 hover:scale-105 transition-all duration-500 group-hover:shadow-[0_0_20px_rgba(225,29,116,0.3)]">
								<div class="flex items-center gap-4">
									<svg class="w-12 h-12 neon-icon animate-pulse" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
										<circle cx="24" cy="18" r="8" fill="#181B2B" stroke="#3B82F6" stroke-width="2.5"/>
										<ellipse cx="24" cy="34" rx="12" ry="7" fill="#181B2B" stroke="#e11d74" stroke-width="2.5"/>
										<circle cx="24" cy="18" r="3" fill="#e11d74"/>
										<path d="M20 16c0-2 8-2 8 0" stroke="#3B82F6" stroke-width="1.5" stroke-linecap="round"/>
										<path d="M18 22c2 2 10 2 12 0" stroke="#e11d74" stroke-width="1.5" stroke-linecap="round"/>
									</svg>
									<div class="flex flex-col">
										<span class="text-lg font-bold text-accent font-mono">Sobre M√≠</span>
										<a href="/sobremi" class="text-sm text-white/80 hover:text-accent transition-all duration-300">Conocer ‚Üí</a>
									</div>
								</div>
							</div>

							<div class="w-full h-24 bg-secondary/80 backdrop-blur-sm rounded-xl border-2 border-accent neon-glow flex items-center justify-between px-4 hover:scale-105 transition-all duration-500 group-hover:shadow-[0_0_20px_rgba(225,29,116,0.3)]" style="overflow:visible;">
								<div class="flex items-center gap-4">
									<button id="easter-egg-btn-mobile" class="relative flex items-center gap-4 focus:outline-none z-10">
										<svg id="easter-egg-svg" class="w-12 h-12 neon-icon animate-pulse" fill="none" stroke="currentColor" stroke-width="3" viewBox="0 0 48 48">
											<circle cx="24" cy="24" r="18" stroke="#e11d74" fill="#3B82F6" opacity="0.7"/>
											<text x="24" y="30" text-anchor="middle" font-size="2.5rem" fill="#fff" font-family="monospace">?</text>
										</svg>
										<div class="flex flex-col">
											<span class="text-lg font-bold text-accent font-mono">Easter Egg</span>
											<span class="text-sm text-white/80">¬øTe atreves?</span>
										</div>
									</button>
									<span id="easter-egg-msg" class="hidden absolute right-4 text-accent font-bold text-lg glitch-text">¬°Secreto! üöÄ</span>
								</div>
							</div>

							<div class="w-full h-24 bg-secondary/80 backdrop-blur-sm rounded-xl border-2 border-accent neon-glow flex items-center justify-between px-4 hover:scale-105 transition-all duration-500 group-hover:shadow-[0_0_20px_rgba(225,29,116,0.3)]">
								<div class="flex items-center gap-4">
									<svg class="w-12 h-12 neon-icon animate-pulse" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
										<circle cx="12" cy="12" r="10" stroke="#3B82F6" />
										<path d="M8 12l2 2 4-4" stroke="#e11d74" />
									</svg>
									<div class="flex flex-col">
										<span class="text-lg font-bold text-accent font-mono">Estado Actual</span>
										<span class="text-sm bg-gradient-to-r from-pink-600 via-fuchsia-500 to-blue-500 text-white rounded px-2 py-1 animate-pulse">Pr√≥ximamente+</span>
									</div>
								</div>
							</div>
						</div>

						{/* Cuadros originales para tablet/desktop */}
						<div class="hidden md:block">
							{/* Cuadros alrededor con √≠conos */}
							<div class="absolute top-8 left-8 w-56 h-56 bg-secondary/80 backdrop-blur-sm rounded-xl border-2 border-accent neon-glow flex flex-col items-center justify-center z-10 hover:scale-105 transition-all duration-500 group-hover:shadow-[0_0_20px_rgba(225,29,116,0.3)]">
								<svg class="w-12 h-12 mb-2 neon-icon animate-pulse" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
									<rect x="6" y="14" width="36" height="24" rx="4" fill="#181B2B" stroke="#3B82F6" stroke-width="2.5"/>
									<path d="M6 18V14a4 4 0 0 1 4-4h8l4 6h20a4 4 0 0 1 4 4v4" stroke="#e11d74" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
									<circle cx="14" cy="34" r="2" fill="#e11d74"/>
									<circle cx="24" cy="34" r="2" fill="#3B82F6"/>
									<circle cx="34" cy="34" r="2" fill="#e11d74"/>
									<rect x="12" y="22" width="24" height="4" rx="2" fill="#3B82F6" opacity="0.5"/>
								</svg>
								<span class="text-xl font-bold text-accent mb-2 font-mono">Ver Proyectos</span>
								<a href="/proyectos" class="mt-2 px-4 py-2 bg-accent text-white rounded-lg shadow-lg hover:bg-pink-500 transition-all duration-300 hover:scale-110 hover:shadow-[0_0_15px_rgba(225,29,116,0.5)]">Ver</a>
							</div>

							<div class="absolute top-8 right-8 w-56 h-56 bg-secondary/80 backdrop-blur-sm rounded-xl border-2 border-accent neon-glow flex flex-col items-center justify-center z-10 hover:scale-105 transition-all duration-500 group-hover:shadow-[0_0_20px_rgba(225,29,116,0.3)]">
								<svg class="w-12 h-12 mb-2 neon-icon animate-pulse" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
									<circle cx="24" cy="18" r="8" fill="#181B2B" stroke="#3B82F6" stroke-width="2.5"/>
									<ellipse cx="24" cy="34" rx="12" ry="7" fill="#181B2B" stroke="#e11d74" stroke-width="2.5"/>
									<circle cx="24" cy="18" r="3" fill="#e11d74"/>
									<path d="M20 16c0-2 8-2 8 0" stroke="#3B82F6" stroke-width="1.5" stroke-linecap="round"/>
									<path d="M18 22c2 2 10 2 12 0" stroke="#e11d74" stroke-width="1.5" stroke-linecap="round"/>
								</svg>
								<span class="text-xl font-bold text-accent mb-2 font-mono">Sobre M√≠</span>
								<a href="/sobremi" class="mt-2 px-4 py-2 bg-accent text-white rounded-lg shadow-lg hover:bg-pink-500 transition-all duration-300 hover:scale-110 hover:shadow-[0_0_15px_rgba(225,29,116,0.5)]">Ver</a>
							</div>

							<div class="absolute bottom-8 left-8 w-56 h-56 bg-secondary/80 backdrop-blur-sm rounded-xl border-2 border-accent neon-glow flex flex-col items-center justify-center z-50 hover:scale-105 transition-all duration-500 group-hover:shadow-[0_0_20px_rgba(225,29,116,0.3)]" style="overflow:visible;">
								<div class="w-full h-full p-4 flex flex-col">
									<div class="flex items-center gap-2 mb-2">
										<div class="w-3 h-3 rounded-full bg-red-500"></div>
										<div class="w-3 h-3 rounded-full bg-yellow-500"></div>
										<div class="w-3 h-3 rounded-full bg-green-500"></div>
										<span class="text-accent text-sm font-mono ml-2">terminal@kgl:~</span>
									</div>
									<div id="terminal-output" class="flex-1 overflow-y-auto text-sm font-mono text-white/80 mb-2">
										<div class="terminal-line">Bienvenido al sistema KGL v1.0</div>
										<div class="terminal-line">Escribe 'help' para ver los comandos disponibles</div>
										<div class="terminal-line">----------------------------------------</div>
									</div>
									<div class="flex items-center gap-2">
										<span class="text-accent">$</span>
										<input 
											type="text" 
											id="terminal-input" 
											class="flex-1 bg-transparent border-none outline-none text-white/80 font-mono text-sm"
											placeholder="Escribe un comando..."
											autocomplete="off"
										>
									</div>
								</div>
							</div>

							<div class="absolute bottom-8 right-8 w-56 h-56 bg-secondary/80 backdrop-blur-sm rounded-xl border-2 border-accent neon-glow flex flex-col items-center justify-center z-10 hover:scale-105 transition-all duration-500 group-hover:shadow-[0_0_20px_rgba(225,29,116,0.3)]">
								<svg class="w-12 h-12 mb-2 neon-icon animate-pulse" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
									<circle cx="12" cy="12" r="10" stroke="#3B82F6" />
									<path d="M8 12l2 2 4-4" stroke="#e11d74" />
								</svg>
								<span class="text-xl font-bold text-accent mb-2 font-mono">Estado Actual</span>
								<span class="mt-2 px-4 py-2 bg-gradient-to-r from-pink-600 via-fuchsia-500 to-blue-500 text-white rounded-lg shadow-lg font-bold animate-pulse">Pr√≥ximamente+</span>
							</div>

							{/* L√≠neas y nodos tipo chipset */}
							<div class="absolute inset-0 pointer-events-none z-0">
								<svg width="100%" height="100%" class="w-full h-full">
									{/* L√≠neas principales con animaci√≥n */}
									<line x1="50%" y1="50%" x2="15%" y2="15%" stroke="#3B82F6" stroke-width="4" opacity="0.7" class="animate-dash">
										<animate attributeName="stroke-dasharray" values="0,1000;1000,0" dur="3s" repeatCount="indefinite" />
									</line>
									<line x1="50%" y1="50%" x2="85%" y2="15%" stroke="#3B82F6" stroke-width="4" opacity="0.7" class="animate-dash">
										<animate attributeName="stroke-dasharray" values="0,1000;1000,0" dur="3s" repeatCount="indefinite" />
									</line>
									<line x1="50%" y1="50%" x2="15%" y2="85%" stroke="#3B82F6" stroke-width="4" opacity="0.7" class="animate-dash">
										<animate attributeName="stroke-dasharray" values="0,1000;1000,0" dur="3s" repeatCount="indefinite" />
									</line>
									<line x1="50%" y1="50%" x2="85%" y2="85%" stroke="#3B82F6" stroke-width="4" opacity="0.7" class="animate-dash">
										<animate attributeName="stroke-dasharray" values="0,1000;1000,0" dur="3s" repeatCount="indefinite" />
									</line>
									{/* L√≠neas secundarias con animaci√≥n */}
									<line x1="50%" y1="50%" x2="50%" y2="10%" stroke="#e11d74" stroke-width="2" opacity="0.5" class="animate-dash">
										<animate attributeName="stroke-dasharray" values="0,1000;1000,0" dur="2s" repeatCount="indefinite" />
									</line>
									<line x1="50%" y1="50%" x2="90%" y2="50%" stroke="#e11d74" stroke-width="2" opacity="0.5" class="animate-dash">
										<animate attributeName="stroke-dasharray" values="0,1000;1000,0" dur="2s" repeatCount="indefinite" />
									</line>
									<line x1="50%" y1="50%" x2="10%" y2="50%" stroke="#e11d74" stroke-width="2" opacity="0.5" class="animate-dash">
										<animate attributeName="stroke-dasharray" values="0,1000;1000,0" dur="2s" repeatCount="indefinite" />
									</line>
									<line x1="50%" y1="50%" x2="50%" y2="90%" stroke="#e11d74" stroke-width="2" opacity="0.5" class="animate-dash">
										<animate attributeName="stroke-dasharray" values="0,1000;1000,0" dur="2s" repeatCount="indefinite" />
									</line>
									{/* Nodos con efecto de brillo */}
									<circle cx="15%" cy="15%" r="8" fill="#3B82F6" class="animate-pulse" opacity="0.7">
										<animate attributeName="r" values="8;10;8" dur="2s" repeatCount="indefinite" />
									</circle>
									<circle cx="85%" cy="15%" r="8" fill="#e11d74" class="animate-pulse" opacity="0.7">
										<animate attributeName="r" values="8;10;8" dur="2s" repeatCount="indefinite" />
									</circle>
									<circle cx="15%" cy="85%" r="8" fill="#e11d74" class="animate-pulse" opacity="0.7">
										<animate attributeName="r" values="8;10;8" dur="2s" repeatCount="indefinite" />
									</circle>
									<circle cx="85%" cy="85%" r="8" fill="#3B82F6" class="animate-pulse" opacity="0.7">
										<animate attributeName="r" values="8;10;8" dur="2s" repeatCount="indefinite" />
									</circle>
									{/* Nodos peque√±os */}
									<circle cx="50%" cy="10%" r="4" fill="#3B82F6" class="animate-pulse" opacity="0.5">
										<animate attributeName="r" values="4;6;4" dur="2s" repeatCount="indefinite" />
									</circle>
									<circle cx="90%" cy="50%" r="4" fill="#e11d74" class="animate-pulse" opacity="0.5">
										<animate attributeName="r" values="4;6;4" dur="2s" repeatCount="indefinite" />
									</circle>
									<circle cx="10%" cy="50%" r="4" fill="#e11d74" class="animate-pulse" opacity="0.5">
										<animate attributeName="r" values="4;6;4" dur="2s" repeatCount="indefinite" />
									</circle>
									<circle cx="50%" cy="90%" r="4" fill="#3B82F6" class="animate-pulse" opacity="0.5">
										<animate attributeName="r" values="4;6;4" dur="2s" repeatCount="indefinite" />
									</circle>
								</svg>
							</div>
						</div>
					</section>
				</div>
			</div>
		</div>
	</main>
</Layout>

<div id="matrix-container" class="fixed inset-0 pointer-events-none opacity-0 transition-opacity duration-1000 z-50">
	<canvas id="matrix-canvas" style="width:100vw;height:100vh;display:block;"></canvas>
</div>

<style>
	@keyframes dash {
		to {
			stroke-dashoffset: 1000;
		}
	}
	.animate-dash {
		animation: dash 3s linear infinite;
	}

	@keyframes glitch {
		0% { background-position: 0% 0%; }
		100% { background-position: 200% 200%; }
	}

	/* Efecto de escaneo m√°s suave */
	.scan-line {
		background: linear-gradient(
			to bottom,
			transparent 0%,
			rgba(225, 29, 116, 0.05) 50%,
			transparent 100%
		);
		background-size: 100% 8px;
		animation: scan 4s linear infinite;
		pointer-events: none;
		opacity: 0.5;
	}

	@keyframes scan {
		0% { transform: translateY(-100%); }
		100% { transform: translateY(100%); }
	}

	/* Efecto de texto glitch */
	.glitch-text {
		position: relative;
		text-shadow: 0.05em 0 0 #e11d74, -0.05em -0.025em 0 #3B82F6;
		animation: glitch-text 2s infinite;
		transform: translateZ(0);
		will-change: text-shadow;
	}

	@keyframes glitch-text {
		0% { text-shadow: 0.05em 0 0 #e11d74, -0.05em -0.025em 0 #3B82F6; }
		14% { text-shadow: 0.05em 0 0 #e11d74, -0.05em -0.025em 0 #3B82F6; }
		15% { text-shadow: -0.05em -0.025em 0 #e11d74, 0.025em 0.025em 0 #3B82F6; }
		49% { text-shadow: -0.05em -0.025em 0 #e11d74, 0.025em 0.025em 0 #3B82F6; }
		50% { text-shadow: 0.025em 0.05em 0 #e11d74, 0.05em 0 0 #3B82F6; }
		99% { text-shadow: 0.025em 0.05em 0 #e11d74, 0.05em 0 0 #3B82F6; }
		100% { text-shadow: -0.025em 0 0 #e11d74, -0.025em -0.025em 0 #3B82F6; }
	}

	/* Efecto cyberpunk para tarjetas m√°s suave */
	.cyberpunk-card {
		position: relative;
		overflow: hidden;
	}

	.cyberpunk-card::before {
		content: '';
		position: absolute;
		top: -50%;
		left: -50%;
		width: 200%;
		height: 200%;
		background: linear-gradient(
			45deg,
			transparent,
			rgba(225, 29, 116, 0.05),
			transparent
		);
		transform: rotate(45deg);
		animation: cyberpunk-shine 6s linear infinite;
		opacity: 0.5;
	}

	@keyframes cyberpunk-shine {
		0% { transform: translateX(-100%) rotate(45deg); }
		100% { transform: translateX(100%) rotate(45deg); }
	}

	/* Efecto para enlaces cyberpunk m√°s suave */
	.cyberpunk-link {
		position: relative;
		overflow: hidden;
	}

	.cyberpunk-link::after {
		content: '';
		position: absolute;
		bottom: -2px;
		left: 0;
		width: 100%;
		height: 1px;
		background: linear-gradient(90deg, #e11d74, #3B82F6);
		transform: scaleX(0);
		transform-origin: right;
		transition: transform 0.5s ease;
		opacity: 0.7;
	}

	.cyberpunk-link:hover::after {
		transform: scaleX(1);
		transform-origin: left;
	}

	/* Animaci√≥n para nodos neurales m√°s suave */
	.neural-node {
		filter: drop-shadow(0 0 1px currentColor);
	}

	.neural-connection {
		stroke-dasharray: 5,5;
		animation: neural-dash 30s linear infinite;
		opacity: 0.2;
	}

	@keyframes neural-dash {
		to {
			stroke-dashoffset: 1000;
		}
	}

	/* Estilos adicionales para la secci√≥n de proyectos */
	#proyectos {
		scroll-margin-top: 2rem;
	}

	/* Animaciones de transici√≥n de p√°gina */
	.page-transition {
		animation: fadeIn 0.5s ease-out;
	}

	@keyframes fadeIn {
		from {
			opacity: 0;
			transform: translateY(20px);
		}
		to {
			opacity: 1;
			transform: translateY(0);
		}
	}

	.page-link {
		position: relative;
	}

	.page-link::before {
		content: '';
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		background: var(--accent);
		transform: translateY(100%);
		transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
		z-index: 9999;
		pointer-events: none;
	}

	.page-link:hover::before {
		transform: translateY(0);
	}

	.easter-egg-glitch {
		animation: glitchy 1.4s cubic-bezier(0.4,0,0.2,1);
		filter: drop-shadow(0 0 24px #e11d74) drop-shadow(0 0 48px #3B82F6) brightness(1.5) contrast(1.2);
	}
	@keyframes glitchy {
		0% { transform: scale(1) rotate(0deg); filter: none; }
		10% { transform: scale(1.1) rotate(-2deg) skewX(2deg); filter: drop-shadow(0 0 8px #e11d74); }
		20% { transform: scale(0.95) rotate(2deg) skewY(-2deg); filter: drop-shadow(0 0 16px #3B82F6); }
		30% { transform: scale(1.2) rotate(-4deg) skewX(-4deg); filter: drop-shadow(0 0 32px #fff); }
		40% { transform: scale(1.05) rotate(2deg) skewY(2deg); filter: drop-shadow(0 0 24px #e11d74); }
		50% { transform: scale(1.15) rotate(-2deg) skewX(2deg); filter: drop-shadow(0 0 48px #3B82F6); }
		60% { transform: scale(1) rotate(0deg) skewY(0deg); filter: drop-shadow(0 0 32px #fff); }
		100% { transform: scale(1) rotate(0deg); filter: none; }
	}
	.easter-egg-flash {
		animation: flashy 1.4s cubic-bezier(0.4,0,0.2,1);
		box-shadow: 0 0 40px 10px #e11d74, 0 0 80px 20px #3B82F6, 0 0 120px 40px #fff;
	}
	@keyframes flashy {
		0% { box-shadow: none; }
		10% { box-shadow: 0 0 40px 10px #e11d74, 0 0 80px 20px #3B82F6; }
		30% { box-shadow: 0 0 80px 20px #fff, 0 0 120px 40px #e11d74; }
		60% { box-shadow: 0 0 120px 40px #3B82F6, 0 0 160px 60px #fff; }
		100% { box-shadow: none; }
	}

	#fireworks-container {
		pointer-events: none;
		z-index: 100;
		position: absolute;
		inset: 0;
		width: 100%;
		height: 100%;
		display: flex;
		align-items: center;
		justify-content: center;
	}
	.firework {
		position: absolute;
		left: 50%;
		top: 50%;
		width: 0;
		height: 0;
		pointer-events: none;
		transform: translate(-50%, -50%);
	}
	.firework-particle {
		position: absolute;
		left: 0;
		top: 0;
		width: 10px;
		height: 3px;
		border-radius: 2px;
		background: var(--color);
		box-shadow: 0 0 8px var(--color), 0 0 16px var(--color);
		transform: rotate(calc(var(--angle) * 1rad)) translateX(0);
		opacity: 0.9;
		animation: firework-explode 1.1s cubic-bezier(0.4,0,0.2,1) forwards;
	}
	@keyframes firework-explode {
		0% {
			transform: rotate(var(--angle)) translateX(0);
			opacity: 1;
		}
		80% {
			opacity: 1;
		}
		100% {
			transform: rotate(var(--angle)) translateX(60px);
			opacity: 0;
		}
	}

	@media (max-width: 1024px) {
		.w-56, .h-56 { width: 12rem !important; height: 12rem !important; }
		.max-w-4xl { max-width: 95vw !important; }
	}
	@media (max-width: 768px) {
		.w-56, .h-56 { width: 10rem !important; height: 10rem !important; }
		.max-w-4xl { max-width: 99vw !important; }
		.text-5xl { font-size: 2.2rem !important; }
		.text-4xl, .text-3xl { font-size: 1.5rem !important; }
		.text-xl { font-size: 1.1rem !important; }
		.px-8 { padding-left: 1rem !important; padding-right: 1rem !important; }
		.py-4 { padding-top: 0.5rem !important; padding-bottom: 0.5rem !important; }
		.rounded-3xl { border-radius: 1.2rem !important; }
		.border-4 { border-width: 2px !important; }
		.p-10 { padding: 1.5rem !important; }
		.gap-8 { gap: 1rem !important; }
		.w-full, .h-full { min-width: 0 !important; min-height: 0 !important; }
	}
	@media (max-width: 600px) {
		nav { padding: 0.75rem 1rem !important; }
		nav .glitch-text { font-size: 1.25rem !important; left: 1rem !important; }
		nav ul { gap: 1rem !important; }
		nav ul li a { font-size: 0.9rem !important; }

		.h-[90vh] { height: auto !important; min-height: 100vh !important; }
		.max-w-4xl { max-width: 100% !important; }
		.rounded-3xl { border-radius: 1rem !important; }
		.border-4 { border-width: 2px !important; }

		/* Logo central */
		.text-5xl { font-size: 2rem !important; }
		.text-lg { font-size: 0.9rem !important; }
		.p-10 { padding: 1rem !important; }

		/* Cuadros m√≥viles */
		.h-24 { height: 5rem !important; }
		.w-12 { width: 2.5rem !important; }
		.h-12 { height: 2.5rem !important; }
		.text-lg { font-size: 1rem !important; }
		.text-sm { font-size: 0.8rem !important; }
		.px-4 { padding-left: 0.75rem !important; padding-right: 0.75rem !important; }
		.gap-4 { gap: 0.75rem !important; }
		.rounded-xl { border-radius: 0.75rem !important; }
		.border-2 { border-width: 1px !important; }

		/* Ajustes generales */
		.shadow-2xl { box-shadow: 0 0 15px rgba(225,29,116,0.3) !important; }
		.neon-glow { box-shadow: 0 0 10px rgba(225,29,116,0.2) !important; }
		
		/* Evitar desbordamiento */
		.overflow-hidden { overflow: hidden !important; }
		.overflow-x-hidden { overflow-x: hidden !important; }
		.overflow-y-auto { overflow-y: auto !important; -webkit-overflow-scrolling: touch !important; }
	}

	/* Evitar overflow horizontal */
	html, body { max-width: 100vw; overflow-x: hidden; }

	/* Ajustes para dispositivos muy peque√±os */
	@media (max-width: 375px) {
		nav { padding: 0.5rem 0.75rem !important; }
		nav .glitch-text { font-size: 1.1rem !important; }
		nav ul { gap: 0.75rem !important; }
		nav ul li a { font-size: 0.8rem !important; }

		.text-5xl { font-size: 1.75rem !important; }
		.h-24 { height: 4.5rem !important; }
		.px-4 { padding-left: 0.5rem !important; padding-right: 0.5rem !important; }
	}

	/* Estilo para el efecto de shake */
	.shake {
		animation: shake 0.5s cubic-bezier(0.36, 0.07, 0.19, 0.97) both;
	}

	@keyframes shake {
		10%, 90% { transform: translate3d(-1px, 0, 0); }
		20%, 80% { transform: translate3d(2px, 0, 0); }
		30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
		40%, 60% { transform: translate3d(4px, 0, 0); }
	}

	/* Efecto Matrix Rain */
	#matrix-container {
		font-family: 'Courier New', monospace;
		background: rgba(0, 0, 0, 0.8);
		overflow: hidden;
		width: 100vw;
		height: 100vh;
		position: fixed;
		top: 0;
		left: 0;
	}

	.matrix-character {
		position: absolute;
		color: #0f0;
		font-size: 1.2rem;
		line-height: 1;
		text-shadow: 0 0 5px #0f0;
		animation: matrix-fall linear infinite;
		opacity: 0;
		will-change: transform;
	}

	.matrix-kgl {
		position: fixed;
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);
		font-size: 8rem;
		font-weight: bold;
		color: #e11d74;
		text-shadow: 0 0 20px #e11d74, 0 0 40px #3B82F6;
		opacity: 1;
		z-index: 9999;
		font-family: 'Courier New', monospace;
		animation: appear-kgl 2s ease-in-out forwards;
		letter-spacing: 1rem;
		pointer-events: none;
	}

	@keyframes matrix-fall {
		0% {
			transform: translateY(-100%);
			opacity: 1;
		}
		80% {
			opacity: 0.8;
		}
		100% {
			transform: translateY(100vh);
			opacity: 0;
		}
	}

	@keyframes appear-kgl {
		0% {
			opacity: 0;
			transform: translate(-50%, -50%) scale(0.5);
			filter: blur(10px);
		}
		50% {
			opacity: 1;
			transform: translate(-50%, -50%) scale(1.2);
			filter: blur(0);
		}
		75% {
			transform: translate(-50%, -50%) scale(0.9);
		}
		100% {
			opacity: 1;
			transform: translate(-50%, -50%) scale(1);
		}
	}

	@media (max-width: 768px) {
		.matrix-kgl {
			font-size: 4rem;
			letter-spacing: 0.5rem;
		}
	}

	/* Estilos para la terminal */
	.terminal-line {
		margin-bottom: 0.25rem;
		white-space: pre-wrap;
		word-break: break-word;
	}

	.terminal-command {
		color: #3B82F6;
		text-shadow: 0 0 5px rgba(59, 130, 246, 0.5);
	}

	.terminal-response {
		color: #e11d74;
		text-shadow: 0 0 5px rgba(225, 29, 116, 0.5);
	}

	.terminal-welcome {
		color: #fff;
		text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
	}

	.terminal-error {
		color: #ef4444;
		text-shadow: 0 0 5px rgba(239, 68, 68, 0.5);
	}

	.terminal-success {
		color: #22c55e;
		text-shadow: 0 0 5px rgba(34, 197, 94, 0.5);
	}

	.terminal-info {
		color: #f59e0b;
		text-shadow: 0 0 5px rgba(245, 158, 11, 0.5);
	}

	#terminal-input {
		caret-color: #e11d74;
	}

	#terminal-input:focus {
		box-shadow: 0 0 0 2px rgba(225, 29, 116, 0.3);
	}
</style>

<script>
let matrixInterval: number | null = null;
let animating = false;
let drops: number[] = [];
let columns = 0;
let fontSize = 22;

function startMatrixRain() {
	const canvas = document.getElementById('matrix-canvas');
	if (!(canvas instanceof HTMLCanvasElement)) return;
	const ctx = canvas.getContext('2d');
	if (!ctx) return;
	// Ajustar tama√±o
	canvas.width = window.innerWidth;
	canvas.height = window.innerHeight;

	// Caracteres Matrix
	const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789@#$%^&*';
	fontSize = 22;
	columns = Math.floor(canvas.width / fontSize);
	drops = Array(columns).fill(1);

	function draw() {
		if (!ctx || !(canvas instanceof HTMLCanvasElement)) return;
		ctx.fillStyle = 'rgba(24, 27, 43, 0.18)';
		ctx.fillRect(0, 0, canvas.width, canvas.height);
		ctx.font = `${fontSize}px monospace`;
		ctx.textAlign = 'center';
		for (let i = 0; i < columns; i++) {
			ctx.shadowColor = Math.random() > 0.5 ? '#e11d74' : '#3B82F6';
			ctx.shadowBlur = 12;
			ctx.fillStyle = Math.random() > 0.5 ? '#e11d74' : '#3B82F6';
			const text = letters[Math.floor(Math.random() * letters.length)];
			ctx.fillText(text, i * fontSize + fontSize / 2, drops[i] * fontSize);
			if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) {
				drops[i] = 0;
			}
			drops[i]++;
		}
	}

	if (matrixInterval) clearInterval(matrixInterval);
	matrixInterval = setInterval(draw, 40) as unknown as number;
}

function stopMatrixRain() {
	if (matrixInterval) {
		clearInterval(matrixInterval);
		matrixInterval = null;
	}
	// Limpiar el canvas
	const canvas = document.getElementById('matrix-canvas');
	if (canvas instanceof HTMLCanvasElement) {
		const ctx = canvas.getContext('2d');
		if (ctx) {
			ctx.clearRect(0, 0, canvas.width, canvas.height);
		}
	}
}

function showKGLText() {
	// Eliminar cualquier texto KGL previo
	const prev = document.body.querySelector('.matrix-kgl');
	if (prev) prev.remove();
	const kglText = document.createElement('div');
	kglText.className = 'matrix-kgl';
	kglText.textContent = 'KGL';
	document.body.appendChild(kglText);
	setTimeout(() => {
		kglText.remove();
	}, 3000);
}

function handleEasterEggClick(btn: HTMLElement) {
	const svg = btn.querySelector('#easter-egg-svg');
	const msg = btn.closest('div')?.querySelector('#easter-egg-msg');
	if (!animating && svg && msg) {
		animating = true;
		svg.classList.add('easter-egg-glitch');
		btn.classList.add('easter-egg-flash');
		msg.classList.remove('hidden');
		setTimeout(() => {
			svg.classList.remove('easter-egg-glitch');
			btn.classList.remove('easter-egg-flash');
			animating = false;
		}, 1400);
		setTimeout(() => {
			msg.classList.add('hidden');
		}, 3500);
		// Efecto Matrix Rain
		const matrixContainer = document.getElementById('matrix-container');
		if (matrixContainer) {
			matrixContainer.style.opacity = '1';
			startMatrixRain();
			showKGLText();
			setTimeout(() => {
				matrixContainer.style.opacity = '0';
				stopMatrixRain();
			}, 3000);
		}
	}
}

const btnMobile = document.getElementById('easter-egg-btn-mobile');
const btnDesktop = document.getElementById('easter-egg-btn-desktop');
if (btnMobile) {
	btnMobile.addEventListener('click', () => handleEasterEggClick(btnMobile as HTMLElement));
}
if (btnDesktop) {
	btnDesktop.addEventListener('click', () => handleEasterEggClick(btnDesktop as HTMLElement));
}
window.addEventListener('resize', () => {
	if (matrixInterval) {
		stopMatrixRain();
		startMatrixRain();
	}
});

// Terminal Interactiva
const terminalInput = document.getElementById('terminal-input') as HTMLInputElement;
const terminalOutput = document.getElementById('terminal-output');
let commandHistory: string[] = [];
let historyIndex = -1;

const projectsList = [
	{
		name: 'Portfolio KGL',
		tech: 'Astro, React, TailwindCSS',
		desc: 'Mi portafolio personal con efectos cyberpunk, terminal interactiva y animaciones.'
	},
	{
		name: 'API de Tareas',
		tech: 'Node.js, Express, MongoDB, C#',
		desc: 'API RESTful para gesti√≥n de tareas, con autenticaci√≥n y panel de administraci√≥n.'
	},
	{
		name: 'E-commerce Moderno',
		tech: 'React, C#, .NET, PostgreSQL',
		desc: 'Tienda online con pasarela de pagos, panel de usuario y dashboard de ventas.'
	},
	{
		name: 'App de Notas',
		tech: 'Vue, Firebase',
		desc: 'Aplicaci√≥n web para tomar notas r√°pidas, sincronizaci√≥n en tiempo real y modo oscuro.'
	}
];

const commands = {
	help: () => `
Comandos disponibles:
- about: Informaci√≥n sobre m√≠
- skills: Mis habilidades t√©cnicas
- projects: Ver mis proyectos
- clear: Limpiar terminal
- matrix: Activar efecto matrix
- contact: Informaci√≥n de contacto
- theme: Cambiar tema de la terminal
- exit: Cerrar terminal
	`,
	about: () => `
Sobre m√≠:
Desarrollador Full Stack apasionado por crear experiencias web √∫nicas.
Especializado en React, Node.js y tecnolog√≠as modernas.
Siempre buscando nuevos desaf√≠os y oportunidades de aprendizaje.
	`,
	skills: () => `
Habilidades t√©cnicas:
Frontend: React, Astro, TailwindCSS
Backend: Node.js, Express, Python, C#
Database: MongoDB, PostgreSQL
DevOps: Git, CI/CD
Otros: .NET, TypeScript
	`,
	projects: (num: string) => {
		if (!num) {
			let list = 'Proyectos destacados:';
			projectsList.forEach((p, i) => {
				list += `\n${i + 1}. ${p.name} [${p.tech}]`;
			});
			list += "\nEscribe 'projects <n√∫mero>' para ver detalles";
			return list;
		} else {
			const idx = parseInt(num) - 1;
			if (projectsList[idx]) {
				const p = projectsList[idx];
				return `Proyecto: ${p.name}\nTecnolog√≠as: ${p.tech}\nDescripci√≥n: ${p.desc}`;
			} else {
				return 'Error: Proyecto no encontrado.';
			}
		}
	},
	clear: () => {
		if (terminalOutput) terminalOutput.innerHTML = '';
		return '‚úì Terminal limpiada';
	},
	matrix: () => {
		const matrixContainer = document.getElementById('matrix-container');
		if (matrixContainer) {
			matrixContainer.style.opacity = '1';
			startMatrixRain();
			setTimeout(() => {
				matrixContainer.style.opacity = '0';
				stopMatrixRain();
			}, 3000);
		}
		return '‚úì Efecto Matrix activado';
	},
	contact: () => `
Contacto:
Email: kevin.gonzalez04@outlook.com
LinkedIn: linkedin.com/in/kevingonzalezlister
GitHub: github.com/https://github.com/keymers
	`,
	theme: () => {
		const themes = ['cyberpunk', 'matrix', 'retro', 'neon'];
		const randomTheme = themes[Math.floor(Math.random() * themes.length)];
		return `‚úì Tema cambiado a: ${randomTheme}`;
	},
	exit: () => {
		if (terminalInput) terminalInput.blur();
		return '‚úì Terminal cerrada. Escribe cualquier comando para reactivar.';
	}
};

function addToOutput(text: string, isCommand = false, type: 'command' | 'response' | 'welcome' | 'error' | 'success' | 'info' = 'response') {
	if (!terminalOutput) return;
	const line = document.createElement('div');
	line.className = 'terminal-line';
	
	if (isCommand) {
		line.innerHTML = `<span class="terminal-command">$ ${text}</span>`;
	} else {
		switch (type) {
			case 'welcome':
				line.className += ' terminal-welcome';
				break;
			case 'error':
				line.className += ' terminal-error';
				break;
			case 'success':
				line.className += ' terminal-success';
				break;
			case 'info':
				line.className += ' terminal-info';
				break;
			default:
				line.className += ' terminal-response';
		}
		line.textContent = text;
	}
	terminalOutput.appendChild(line);
	terminalOutput.scrollTop = terminalOutput.scrollHeight;
}

function processCommand(cmd: string) {
	const [command, ...args] = cmd.trim().toLowerCase().split(' ');
	
	if (command === '') return;
	
	// Limpiar la consola antes de mostrar el nuevo comando
	if (terminalOutput) {
		terminalOutput.innerHTML = '';
		addToOutput('Bienvenido al sistema KGL v1.0', false, 'welcome');
		addToOutput('Escribe \'help\' para ver los comandos disponibles', false, 'info');
		addToOutput('----------------------------------------', false, 'welcome');
	}
	
	addToOutput(cmd, true);
	
	if (command in commands) {
		let result;
		if (command === 'projects' && args.length > 0) {
			result = (commands as any)[command](args[0]);
		} else {
			result = (commands as any)[command](...args);
		}
		if (result) {
			result.split('\n').forEach((line: string) => {
				const trimmedLine = line.trim();
				if (trimmedLine.startsWith('Error:')) {
					addToOutput(trimmedLine, false, 'error');
				} else if (trimmedLine.startsWith('‚úì') || trimmedLine.includes('activado')) {
					addToOutput(trimmedLine, false, 'success');
				} else if (trimmedLine.startsWith('Comandos disponibles:') || trimmedLine.startsWith('Escribe')) {
					addToOutput(trimmedLine, false, 'info');
				} else {
					addToOutput(trimmedLine, false, 'response');
				}
			});
		}
	} else {
		addToOutput(`Error: Comando no reconocido: ${command}. Escribe 'help' para ver los comandos disponibles.`, false, 'error');
	}
}

if (terminalInput) {
	terminalInput.addEventListener('keydown', (e) => {
		if (e.key === 'Enter') {
			const command = terminalInput.value.trim();
			if (command) {
				commandHistory.push(command);
				historyIndex = commandHistory.length;
				processCommand(command);
				terminalInput.value = '';
			}
		} else if (e.key === 'ArrowUp') {
			e.preventDefault();
			if (historyIndex > 0) {
				historyIndex--;
				terminalInput.value = commandHistory[historyIndex];
			}
		} else if (e.key === 'ArrowDown') {
			e.preventDefault();
			if (historyIndex < commandHistory.length - 1) {
				historyIndex++;
				terminalInput.value = commandHistory[historyIndex];
			} else {
				historyIndex = commandHistory.length;
				terminalInput.value = '';
			}
		}
	});

	terminalInput.addEventListener('focus', () => {
		terminalInput.parentElement?.classList.add('border-accent');
	});

	terminalInput.addEventListener('blur', () => {
		terminalInput.parentElement?.classList.remove('border-accent');
	});
}
</script>
