---
import Layout from "../layouts/Layout.astro";
import Navigation from "../components/Navigation.astro";
import CentralLogo from "../components/CentralLogo.astro";
import MobileCards from "../components/MobileCards.astro";
import DesktopCards from "../components/DesktopCards.astro";
import MatrixEffect from "../components/MatrixEffect.astro";
import TestimonialsSection from "../components/TestimonialsSection";
import EnvDiagnostic from "../components/EnvDiagnostic";
import FormularioSelector from '../components/FormularioSelector';

// Welcome to Astro! Wondering what to do next? Check out the Astro documentation at https://docs.astro.build
// Don't want to use any of this? Delete everything in this file, the `assets`, `components`, and `layouts` directories, and start fresh.
---

<Layout title="KGL - Portafolio">
  <!-- Componente de diagnóstico temporal - Solo en desarrollo -->
  {import.meta.env.DEV && <EnvDiagnostic client:load />}

  <main
    class="min-h-screen flex items-center justify-center bg-primary relative overflow-hidden page-transition"
  >
    {/* Efecto de partículas de fondo */}
    <div
      class="absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-primary via-primary/80 to-primary/60"
    >
    </div>
    <!-- <div class="absolute inset-0 bg-[url('/grid.svg')] opacity-20"></div> -->

    {/* Efecto de glitch en el fondo */}
    <div class="absolute inset-0 glitch-bg"></div>

    {/* Red neuronal animada eliminada */}

    <div
      class="relative w-full max-w-4xl min-h-[80vh] sm:h-[90vh] flex items-center justify-center"
    >
      {/* Tarjeta principal con navbar */}
      <div
        class="relative w-full h-full bg-secondary/80 backdrop-blur-sm rounded-3xl border-4 border-accent neon-glow shadow-2xl flex flex-col overflow-visible group hover:shadow-[0_0_30px_rgba(225,29,116,0.5)] transition-all duration-500 cyberpunk-card"
      >
        {/* Efecto de escaneo */}
        <div class="absolute inset-0 scan-line"></div>

        {/* Navbar */}
        <Navigation />

        {/* Contenido principal */}
        <div class="flex-1 overflow-y-auto overscroll-contain">
          {/* Sección Home */}
          <section
            id="home"
            class="h-full flex flex-col items-center justify-start relative pt-8 md:pt-0 md:justify-center"
          >
            {/* Logo central */}
            <CentralLogo />

            {/* Tarjetas móviles */}
            <MobileCards />

            {/* Tarjetas de escritorio */}
            <DesktopCards />
          </section>
        </div>
      </div>
    </div>
  </main>

  {/* Sección de Testimonios fuera del bloque principal */}
  <section
    class="py-16 bg-gradient-to-r from-gray-900 to-gray-800 text-white relative overflow-hidden"
  >
    {/* Efecto de fondo */}
    <div
      class="absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-blue-600/10 via-purple-600/10 to-blue-600/10"
    >
    </div>

    <div class="container mx-auto px-4 relative z-10">
      <div class="max-w-4xl mx-auto">
        <div class="text-center mb-12">
          <h2
            class="text-3xl font-bold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-400"
          >
            Lo que dicen mis clientes
          </h2>
          <p class="text-lg text-gray-300">
            Descubre las experiencias de quienes han confiado en mi trabajo
          </p>
        </div>

        <TestimonialsSection client:visible limit={6} />
      </div>
    </div>
  </section>

  {/* Sección para agregar testimonios */}
  <section
    class="py-16 bg-gradient-to-r from-gray-900 to-gray-800 text-white relative overflow-hidden"
  >
    {/* Efecto de fondo */}
    <div
      class="absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-blue-600/10 via-purple-600/10 to-blue-600/10"
    >
    </div>

    <div class="container mx-auto px-4 relative z-10">
      <div class="max-w-4xl mx-auto">
        <div class="text-center mb-12">
          <h2
            class="text-3xl font-bold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-400"
          >
            ¿Trabajamos juntos?
          </h2>
          <p class="text-lg text-gray-300">
            Comparte tu experiencia y ayuda a otros a conocerme mejor
          </p>
        </div>

        <FormularioSelector client:visible />
      </div>
    </div>
  </section>
</Layout>

{/* Efecto Matrix */}
<MatrixEffect />

<style>
  @import "../styles/home.css";
</style>

<script src="../scripts/home.js"></script>
 